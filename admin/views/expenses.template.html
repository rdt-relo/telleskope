
<div class="col-md-12">
    <div class="table-responsive">
        <table id="expenses_table" class="table table-hover display compact" style="width:100%;table-layout: fixed;" summary="This table display the list of event expenses">
            <thead>
                <tr>
                    <th width="10%" scope="col">Date</th>
                    <th width="10%" scope="col"><?= $_COMPANY->getAppCustomization()['group']["name-short"]?> Name</th>
                    <th width="10%" scope="col"><?= $_COMPANY->getAppCustomization()['chapter']["name-short"]?> Name</th>
                    <th width="40%" scope="col">Description</th>
                    <th width="10%" scope="col">Charge Code</th>
                    <th width="10%" scope="col">Budgeted Amount</th>
                    <th width="10%" scope="col">Expensed Amount</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>	
</div>
<!-- Expenses Sub items  -->
<div id="expenses_sub_items"></div>

<script src="../vendor/js/datatables-2.1.8/datatables.min.js"></script>
<script>
    $(document).ready(function() {       
        var dtable = 	$('#expenses_table').DataTable( {
            serverSide: true,
            processing: true,
            bFilter: true,
            bInfo : false,
            bDestroy: true,
            order: [[ 0, "DESC" ]],
            language: {
                    searchPlaceholder: "Search here..",
                    url: '../vendor/js/datatables-lang/i18n/<?= $_COMPANY->getDatatableLanguage($_USER->val("language")); ?>.json'
                },
                columnDefs: [
                { targets: [], orderable: false }
                ],
            ajax:{
                url :"ajax.php?getExpensesByYear=<?= $_COMPANY->encodeId($year); ?>", // json datasource
                type: "POST",  // method  , by default get
                error: function(data){  // error handling
                    $(".table-grid-error").html("");
                    $("#table-members-server").append('<tbody class="table-grid-error"><tr><th colspan="6">No data found!</th></tr></tbody>');
                    $("#table-grid_processing").css("display","none");
                },complete : function(){
                    $('.initial').initial({
                        charCount: 2,
                        textColor: '#ffffff',
                        seed: 0,
                        height: 30,
                        width: 30,
                        fontSize: 15,
                        fontWeight: 300,
                        fontFamily: 'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif',
                        radius: 0
                    });
                    $(".deluser").popConfirm({content: ''});
                }
            },
        } );

        $(".dataTables_filter input")
        .unbind()
        .bind("input", function(e) {
            if(this.value.length >= 2 || e.keyCode == 13) {
                dtable.search(this.value).draw();
            }
            if(this.value == "") {
                dtable.search("").draw();
            }
            return;
        });
        
    } );
    
    function validateFilter(field) {
        var valu = field.value.replace(/[^A-Za-z0-9_@\.]/g, '');
        field.value = valu;	
        if (valu.length >= 3) {
            document.getElementById("form-search-button").disabled = false;
        } else {
            document.getElementById("form-search-button").disabled = true;
        }
    }
</script>
</body>
</html>
