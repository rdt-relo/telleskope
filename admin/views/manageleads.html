 <div class="container  col-md-offset-2 margin-top">
				<div class="row">	  
					<div class="col-md-12">
						<div class="widget-simple-chart card-box ">
							<div class="col-md-12 divider">
								<h6><?= $pagetitle; ?>&nbsp;</h6>
								<a aria-label="<?= gettext('Add a new leader');?>" class="add-plus-circle-icon" href="newleads?gid=<?=$_GET['gid']?>">
									<i class="fa fa-plus-circle fa-lg" title="Add a new leader" aria-hidden="true"></i>
								</a>
							</div>
							
							<div class="clearfix"></div>
						<?php if((time()- @$_SESSION['updated']) < 5){ ?>
							<div id="hidemesage" class="alert alert-info alert-dismissable">
								<a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
								<?= UPDATED; ?>
							</div>
						<?php }elseif((time()- @$_SESSION['added']) < 5) { ?>
							<div id="hidemesage" class="alert alert-info alert-dismissable">
								<a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
								<?= ADDED; ?>
							</div>
						<?php }elseif((time()- @$_SESSION['error']) < 5){ ?>
								<div id="hidemesage" class="alert alert-danger alert-dismissable">
									<a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
									<?= ERROR; ?>
								</div>
						<?php } ?>
									
							
							<div class="table-responsive">
								<table class="table table-hover display compact" id="lead_list" summary="Group leaders list">
									<thead>
										<tr>
											<th width="10%" class="color-black" scope="col">Name</th>
											<th width="15%" class="color-black" scope="col">Role</th>
											<th width="15%" class="color-black" scope="col">Role Title</th>
											<th width="10%" class="color-black" scope="col">Scope</th>
											<th width="10%" class="color-black" scope="col">Leader Since</th>
											<th width="2%" class="color-black" scope="col">Create Content</th>
											<th width="2%" class="color-black" scope="col">Publish Content</th>
											<th width="2%" class="color-black" scope="col">Manage</th>
											<th width="10%" class="color-black" scope="col">Manage Budget</th>
											<th width="16%" class="color-black" scope="col">Action</th>
										</tr>
									</thead>
									<tbody>
							
								<?php	if(count($rows)>0){ ?>
								<?php	for($i=0;$i<count($rows);$i++){
											$encodedId = $_COMPANY->encodeId($rows[$i]['leadid']);
								?>
									<tr id="<?=$encodedId?>" >
									<td>
										<?= User::BuildProfilePictureImgTag($rows[$i]['firstname'], $rows[$i]['lastname'], $rows[$i]['picture'],'memberpicture_small');?>
										<?php
											echo rtrim($rows[$i]['firstname']." ".$rows[$i]['lastname']," ");
										?>
										</td>
										<td>
											<?= htmlspecialchars($types[$rows[$i]['grouplead_typeid']]['type']??''); ?>
                                            <br>
                                            (<?= Group::SYS_GROUPLEAD_TYPES[$types[$rows[$i]['grouplead_typeid']]['sys_leadtype']] ?>)
										</td>
										<td>
											<?= htmlspecialchars($rows[$i]['roletitle'])?>
										</td>
										<td>
                                            <?php
                                                if ($types[$rows[$i]['grouplead_typeid']]['sys_leadtype'] == 3) {
                                                    echo "Regions <br> - ".str_replace(",", "<br> - ", $rows[$i]['region']);
                                                } else {
                                                    echo "Global";
                                                }
                                            ?>
                                        </td>
										<td class="td" style="text-align:justify;"><?=  $_USER->formatUTCDatetimeForDisplayInLocalTimezone($rows[$i]['assigneddate'],true,true,true)?></td>
										<td>
											<?= $types[$rows[$i]['grouplead_typeid']]['allow_create_content'] ? "<span style='color:green;'>Yes</span>" : "<span style='color:#a52a2a;'>No</span>"; ?>
										</td>
										<td>
											<?=  $types[$rows[$i]['grouplead_typeid']]['allow_publish_content'] ? "<span style='color:green;'>Yes</span>" : "<span style='color:brown;'>No</span>"; ?>
										</td>
										<td>
											<?=  $types[$rows[$i]['grouplead_typeid']]['allow_manage'] ? "<span style='color:green;'>Yes</span>" : "<span style='color:brown;'>No</span>"; ?>
										</td>
										<td>
											<?=  $types[$rows[$i]['grouplead_typeid']]['allow_manage_budget'] ? "<span style='color:green;'>Yes</span>" : "<span style='color:brown;'>No</span>"; ?>
										</td>
										<td width="15%"><a href="newleads?gid=<?=$_GET['gid']?>&lid=<?=$encodedId;?>"><i class="fa fa-edit" aria-label="Edit" title="Edit"></i></a>&emsp;<button aria-label="delete" class="btn btn-no-style deluser" onclick="deleteLeads(<?=($i+1)?>,'<?=$encodedId;?>','<?=$_COMPANY->encodeId($rows[$i]['groupid'])?>')" title="<strong>Are you sure to delete!</strong>"><i class="fa fa-trash" title="Delete" aria-label="Delete"></i></button></td>
								</tr>
								
								<?php   } ?>
								<?php   }?>
									</tbody>
								</table>
							</div>
							<br/>
							<div align="center">
								<a href="group" class="btn btn-primary">Back</a>
							</div>
						</div>								
					</div>
				</div>
			</div>
		</div>
		
		<!--div class="container-fluid col-md-offset-2 margin-top logo-footer">
			<img src="../image/logo-footer.png">
		</div-->

		<script src="<?=TELESKOPE_CDN_STATIC?>/vendor/js/datatables-2.1.8/datatables.min.js"></script>
<script>
	
$(document).ready(function() {
	$('#lead_list').DataTable( {
		"order": [],
		"bPaginate": true,
		"bInfo" : false,
		"pageLength": 200, // Set the number of entries per page to 200
        "lengthChange": false, // Hide the entries per page dropdown
		"columnDefs": [
			{ targets: [8], orderable: false, defaultContent: "-",                      
                targets: "_all" }
		],
		language: {
            searchPlaceholder: "...",
            url: '../vendor/js/datatables-lang/i18n/<?= $_COMPANY->getDatatableLanguage($_USER->val("language")); ?>.json'                
        },

	} );

    //Helper function to keep table row from collapsing when being sorted
    var fixHelperModified = function(e, tr) {
        var $originals = tr.children();
        var $helper = tr.clone();
        $helper.children().each(function(index)
        {
          $(this).width($originals.eq(index).width())
        });
        return $helper;
    };

    //Make diagnosis table sortable
    $("#lead_list tbody").sortable({
        helper: fixHelperModified,
        stop: function(event,ui) {renumber_table('#lead_list')}
    }).disableSelection();
});

//Renumber table rows
function renumber_table(tableID) {
	var ids = [];
    $(tableID + " tr").each(function() {
		var id = $(this).closest('tr').attr('id');
		if (id){
			ids.push(id);
		}
	});
	
	if(ids.length > 0){
		updateGroupleadPriority(ids,"<?=$_GET['gid']?>");
	}
}
</script>
		
	</body>
</html>
