	<link rel='stylesheet' href='<?=TELESKOPE_CDN_STATIC?>/vendor/js/jquery-ui-1.14.0/themes/ui-lightness/jquery-ui.min.css' />
	<link href='<?=TELESKOPE_CDN_STATIC?>/vendor/js/fullcalendar-3.4.0/dist/fullcalendar.min.css' rel='stylesheet' />
	<link href='<?=TELESKOPE_CDN_STATIC?>/vendor/js/fullcalendar-3.4.0/dist/fullcalendar.print.min.css' rel='stylesheet' media='print' />

	<style>

		body {
			margin: 0px 0px;
			padding: 0;
			font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
			font-size: 14px;
		}

		#calendar {
			max-width: 900px;
			margin: 0 auto;
		}
		.table > thead > tr:first-child > th{border-top:none;}
	</style>		
			
	<div class="container col-md-offset-2 margin-top">
		<div class="row">              
			<div class="col-md-12">
				<div class="widget-simple-chart card-box">
					<div class="col-md-12 divider">
						<h6 style="margin-top: 4px;" >Manage Event Types&nbsp;</h6>
						<a aria-label="Add new event type" class="add-plus-circle-icon" href="new_eventtype">
							<i class="fa fa-plus-circle fa-lg mt-3 ml-2" title="Add new event type" aria-hidden="true"></i>
						</a>
					</div>
					
					<div class="clearfix"></div>
				<?php if((time()- @$_SESSION['updated']) < 5){ ?>
					<div id="hidemesage" class="alert alert-info alert-dismissable">
						<a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
						<?= UPDATED; ?>
					</div>
				<?php }elseif((time()- @$_SESSION['added']) < 5) { ?>
					<div id="hidemesage" class="alert alert-info alert-dismissable">
						<a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
						<?= ADDED; ?>
					</div>
				<?php }elseif((time()- @$_SESSION['error']) < 5){ ?>
						<div id="hidemesage" class="alert alert-danger alert-dismissable">
							<a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
							<?= ERROR; ?>
						</div>
				<?php } ?>
					<div class="col-md-12">
						<div class="table-responsive " id="list-view">
					
							<table id="table" class="table table-hover display compact" summary="This table display the list of event types">
								<thead>
									<tr>
										<th width="10%" scope="col">#</th>
										<th width="43%" scope="col">Event Type</th>
										<th width="15%" scope="col">System Event Type</th>
										<th width="15%" scope="col">Volunteers</th>
										<th width="17%" scope="col">Action</th>
									</tr>
								</thead>
								<tbody>
							<?php if(count($data)>0){
									for($i=0;$i<count($data);$i++){
										$encodedId = $_COMPANY->encodeId($data[$i]['typeid']);
										$enableControls =  $data[$i]['zoneid'] || $_USER->isCompanyAdmin();
							?>
									<tr id="e<?= ($i+1); ?>" <?= ($data[$i]['isactive'])?'':'style="background-color: rgb(251, 199, 199); opacity: 0.5;"' ?> >
										<td><?= ($i+1); ?></td>
										<td id="td<?= ($i+1)?>"><?= $data[$i]['type'] . ($data[$i]['zoneid'] ? ' (zone)' : ' (global)') ; ?></td>
										<td id="std<?= ($i+1)?>"><?= ($data[$i]['sys_eventtype'])?Event::SYS_EVENTTYPES["{$data[$i]['sys_eventtype']}"] : '-- none --'; ?></td>
										<td>
                                            <?php if ($data[$i]['zoneid']) { // Disable volunteers for global event types ?>
                                                <a aria-label="Manage Volunteers" class="btn btn-info btn-sm" href="manage_event_type_volunteer?event_type_id=<?= $encodedId;?>" ?>Manage Volunteers</a>
                                            <?php } else { ?>
                                                Volunteers cannot be set for global event types
                                            <?php }  ?>
                                        </td>
										<td>
                                            <?php if ($enableControls) { ?>
											<button aria-label="Edit" class="btn btn-no-style" id="bedit<?= ($i+1);?>" onclick="editEventType(<?= ($i+1); ?>)" <?= ($data[$i]['isactive'])?'':'style="display:none;"' ?>><i class="fa fa-edit" title="Edit"></i></button>&nbsp;
											<button aria-label="Disable" class="btn btn-no-style deluser" id="bdisable<?= ($i+1);?>" onclick="deleteEventType(<?=($i+1)?>,'<?=$encodedId;?>',0)" title="<strong>Are you sure you want to disable!</strong>" <?= ($data[$i]['isactive'])?'':'style="display:none;"' ?> ><i class="fa fa-trash" title="Disable" aria-hidden="true"></i></button>&nbsp;
											<button aria-label="Enable" class="btn btn-no-style deluser" id="benable<?= ($i+1);?>" onclick="deleteEventType(<?=($i+1)?>,'<?=$encodedId;?>', 1)" title="<strong>Are you sure you want to enable!</strong>" <?= ($data[$i]['isactive'])?'style="display:none;"':'' ?> ><i class="fa fa-undo" title="Enable" aria-hidden="true"></i></button>
                                            <?php } else { ?>
                                            <?php } ?>
										</td>
									</tr>
									<tr id="u<?= ($i+1); ?>" style="display:none;">
                                        <?php if ($enableControls) { ?>
										<td><?= ($i+1); ?></td>
										<td><input type="hidden" id="id<?=($i+1);?>" value="<?=$encodedId;?>" /><input type="text" id="etype<?= ($i+1); ?>" value="<?= $data[$i]['type']; ?>" />
										</td>
										<td id="std<?= ($i+1);?>"><?= ($data[$i]['sys_eventtype'])?Event::SYS_EVENTTYPES["{$data[$i]['sys_eventtype']}"] : '-- none --'; ?></td>
										<td>
										<button  class="btn btn-info btn-sm" onclick="updateEventType(<?= ($i+1); ?>);" class="button">Update</button>
										<button  class="btn btn-info btn-sm" onclick="cancelUpdateEventType(<?= ($i+1); ?>);" class="button">Cancel</button>
										</td>
                                        <?php } else { ?>
                                            <td><?= ($i+1); ?></td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                        <?php } ?>
									</tr>
							<?php	} ?>
									
						<?php } ?>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</body>
</html>
