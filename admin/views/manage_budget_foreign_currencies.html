<div class="modal" id="manage_budget_cureencies_modal" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><?= $modalTitle; ?>  <i id="add_update_budger_currency_modal" tabindex="0" class="fa fa-plus-circle" title="Add new foreign currency" aria-label="Add Budget Foreign Currency" onclick="addUpdateBudgerCurrencyModal('<?= $_COMPANY->encodeId($budget_year_id );?>','');"></i></h5>
          <button type="button" id="btn_close" class="close" aria-label="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-12">
                    <?php if(!empty($allowed_foreign_currencies)){ 
                        $allCurrencies = Budget2::FOREIGN_CURRENCIES;
                        
                    ?>
                        <div class="table-responsive">
                            <table id="budget_year_table" class="table table-hover display compact" style="width:100%;table-layout: fixed;" summary="This table display the list of event expenses">
                                <thead>
                                    <tr>
                                        <th width="10%" scope="col">#</th>
                                        <th width="40%" scope="col">Foreign Currency</th>
                                        <th width="30%" scope="col">
                                            Conversion Rate to <?= $_COMPANY->getAppCustomization()['budgets']['currency']?>
                                            <i class="fa fa-info-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="The foreign currency amount will be multiplied by the conversion rate to get an equivalent <?= $_COMPANY->getAppCustomization()['budgets']['currency']?> amount."></i>
                                        </th>
                                        <th width="20%" scope="col">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                <?php $i = 0; foreach($allowed_foreign_currencies as $currency){ 
                                    $currencyName  = $allCurrencies[$currency['cc']]['name'];
                                ?>
                                    <tr>
                                        <td><?= $i+1; ?></td>
                                        <td><?= $currency['cc'].' ('.$currencyName.')'; ?></td>
                                        <td><?= number_format($currency['conversion_rate'],9); ?></td>
                                        <td>
                                          <button class="btn btn-primary" onclick="addUpdateBudgerCurrencyModal('<?= $_COMPANY->encodeId($budget_year_id );?>','<?= $_COMPANY->encodeId($i);?>');">Edit</button>&nbsp;
                                          <button class="btn btn-primary deluser" title="Are you sure to delete this?" onclick="deleteBudgetCurrency('<?= $_COMPANY->encodeId($budget_year_id );?>','<?= $_COMPANY->encodeId($i);?>')">Delete</button></td>
                                    </tr>
                                <?php $i++; } ?>
                                </tbody>
                            </table>
                        </div>


                    <?php } else { ?>
                        <p class="text-center p-5 m-5">No foreign currencies configured. If your budget year support multiple currencies, <a href="javascript:void(0)" onclick="addUpdateBudgerCurrencyModal('<?= $_COMPANY->encodeId($budget_year_id );?>','');">+ Add foreign currency</a></p>
                    <?php } ?>                 
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal"><?= gettext("Close")?></button>
        </div>
      </div>
    </div>
  </div>

<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    });

    $('#add_update_budger_currency_modal').keypress(function(e){
        if((e.keyCode ? e.keyCode : e.which) == 13){
            $(this).trigger('click');
        }
    });

</script>