<form id="downloadTeamMemberJoinSurveyResponses" class="form-horizontal" action="ajax.php?downloadTeamMemberJoinSurveyResponses=<?= $_COMPANY->encodeId($groupid); ?>" method="POST" role="form" style="display: block;width:100% !important">
    <input type="hidden" name="csrf_token" value="<?= Session::GetInstance()->csrf; ?>">
    <div class="mt-3" tyle="padding: 0 50px; border:1px solid rgb(223, 223, 223); padding-top:10px;">
        <strong class="pt-3"><?= $_COMPANY->getAppCustomization()['teams']['name']; ?> Download Join Requests</strong>
        <hr>
            <input type="hidden" name="userid" value="<?= $_COMPANY->encodeId(0); ?>">
            <input type="hidden" name="roleid" value="<?= $_COMPANY->encodeId(0); ?>">
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="teams">Report download options</label>
                    <select class="form-control" name="downloadOptions[]" id="downloadOptions" multiple size="3">
                        <option value="<?= $_COMPANY->encodeId(2); ?>" selected>Download Join Requests for Matched Users</option>
                        <option value="<?= $_COMPANY->encodeId(1); ?>" selected>Download Join Requests for Unmatched Users</option>
                     </select>
                </div>
            </div>
            <div class="col-sm-2">&nbsp;</div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label for="s_options"><?= gettext("Select Fields");?></label>
                    <br>
                    <div class="mb-2 text-sm">
                        <a tabindex="0" id="selectAllCheckBox" class="link_show" onclick="checkUncheckAllCheckBoxes('userOptionsMultiCheck',true)"> <?= gettext("Select All");?></a> | <a tabindex="0" id="deselectAllCheckBox" class="link_show" onclick="checkUncheckAllCheckBoxes('userOptionsMultiCheck',false)"> <?= gettext("Deselect All");?></a>
                    </div>
                <?php foreach($fields as $key => $value){ ?>
                    <input class="userOptionsMultiCheck" type="checkbox" name="<?= $key; ?>" value="<?= $key; ?>" checked>&emsp;<?= $value; ?><br>
                <?php } ?>
                </div>
            </div>
           

    <div class="form-group mt-2">
        <div class="pull-right">
            <button type="submit" id="downloadReportBtn" name="submit" class="btn btn-primary"><?= gettext("Download Report");?></button>
            <button type="button" id="closeSlide" class="btn btn-primary" onclick='$("#reportTeamMemberJoinSurveyResponseDownloadOptions" ).slideUp( "slow", function() { $("#reportTeamMemberJoinSurveyResponseDownloadOptions").html(""); });'><?= gettext("Close");?></button>
        </div>
    </div>
</form>
<script>
$(function(){ 
    $("#downloadTeamMemberJoinSurveyResponses").keypress(function (e) {
        if (event.keyCode == 13) {

            if ((event.target.id === "selectAllCheckBox")) {
                checkUncheckAllCheckBoxes('userOptionsMultiCheck',true);          
            }else if(event.target.id === "deselectAllCheckBox"){
                checkUncheckAllCheckBoxes('userOptionsMultiCheck',false);
            }

            if (event.target.id === "downloadReportBtn" || event.target.id === "closeSlide") {
                return true;
            } else {
                event.preventDefault();
                return false;
            }       
        }
    });
});

</script>