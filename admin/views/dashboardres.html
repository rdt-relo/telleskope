<div class="container  col-md-offset-2 margin-top">
    <style>
        #myProgress {
            width: 100%;
            background-color: #ddd;
            border-radius: 10px;
        }

        .myBar {
            height: 20px;
            background-color: #418BBB;
            text-align: center;
            line-height: 20px;
            color: white;
            border-radius: 10px;
        }
        .download-stats {
            z-index: 9999;
        }
       
        .font-s {
            font-size: x-large;
            padding: 0 0 0 25px;
        }

        .cl {
            float: right;
            margin-top: 14px;
        }

        #slt {
            display: none;
            padding: 25px;
        }

        #slt-1 {
            display: none;
            padding: 25px;
        }

        #slt-2 {
            display: none;
            padding: 25px;
        }

        #slt-3 {
            display: none;
            padding: 25px;
        }
        .download-stats {
            position: absolute;
            right: 0;
            margin-right: 5px;
        }

    .visually-hidden {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }
    </style>
  
    <style>
        .info-card {
            -webkit-perspective: 1000px;
            cursor: pointer;
        }

        .front, .back {
            background: #FFF;
            transition: -webkit-transform 0.1s;
            -webkit-backface-visibility: hidden;
            border: .02em solid #ddd;
            border-radius: 5px;
        }

        .front {
            position: absolute;
            z-index: 1;
            width: 100%;
            height: 100%;
        }

        /* .back {
            -webkit-transform: rotateY(-180deg);
            width: 100%;
            height: 100%;
        }

        .info-card:hover .back {
            -webkit-transform: rotateY(0);
        }

        .info-card:hover .front {
            -webkit-transform: rotateY(180deg);
        }  */

        .info-card.toggleFlip .front {
            /* -webkit-transform: rotateY(180deg); */
            -webkit-transform: rotatex(180deg);
            width: 100%;
            height: 100%;
        }
        .dropdown-toggle.no-after:after {
            display: none !important;
        }

        .top-div{
            height: 70% !important;
        }
        .post{
            height: 30% !important;
        }
        .all-text-color{
            padding-top: 2% !important;
        }
        .counter{
            padding-top: 18% !important;
        }
       
        @media screen and (min-width: 1440px) {
            .all-text-color{
                padding-top: 5% !important;
            }
        }
    </style>

<script>
   </script>
    <div class="row spacing">
        <?php if ((time() - @$_SESSION['updated']) < 5) { ?>
            <div id="hidemesage" class="alert alert-info alert-dismissable">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">X</a>
                <?= UPDATED; ?>
            </div>
        <?php } elseif ((time() - @$_SESSION['added']) < 5) { ?>
            <div id="hidemesage" class="alert alert-info alert-dismissable">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">X</a>
                <?= ADDED; ?>
            </div>
        <?php } ?>
    </div>

    <?php if (0 && $_USER->isCompanyAdmin()) { /* On 2022-11-15 disabled this block */ ?>
    <div class="row">
        <div class="col-md-12">
            <h2 class="impact"><span><strong>Company Statistics <small>(as of <?= $companyStatsAsOf; ?>)</small></strong></span></h2>
            <div class="clearfix"></div>
            <div class="row">
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($number_of_zones); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Zones</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="totalZones" width="260px" height="164"></canvas>
                                <script>
                                    createChart('totalZones','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_number_of_zones)?>','Company Zones');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($totalRegions); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Regions</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="totalRegions" width="260px" height="164"></canvas>
                                <script>
                                    createChart('totalRegions','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_totalRegions)?>','Company Regions');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($totalBranches); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Office Locations</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="totalBranches" width="260px" height="164"></canvas>
                                <script>
                                    createChart('totalBranches','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_totalBranches)?>','Company Office Locations');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <?php if (0) { // Hiding this to get two complete rows ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($totalDepartments); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Departments</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="totalDepartments" width="260px" height="164"></canvas>
                                <script>
                                    createChart('totalDepartments','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_totalDepartments)?>','Company Departments');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <?php } // Hiding this to get two complete rows ?>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($admin_global_level); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Global Admins</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="admin_global_level" width="260px" height="164"></canvas>
                                <script>
                                    createChart('admin_global_level','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_admin_global_level)?>','Company Global Admins');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($admin_zone_level); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Zone Admins</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="admin_zone_level" width="260px" height="164"></canvas>
                                <script>
                                    createChart('admin_zone_level','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_admin_zone_level)?>','Company Zone Admins');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($user_total); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Users</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="user_total" width="260px" height="164"></canvas>
                                <script>
                                    createChart('user_total','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_user_total)?>','Company Users');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($user_member_unique); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color"><?= $_COMPANY->getAppCustomization()['group']["name-short"]; ?> Unique Members</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="user_member_unique" width="260px" height="164"></canvas>
                                <script>
                                    createChart('user_member_unique','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_user_member_unique)?>','<?= $_COMPANY->getAppCustomization()["group"]["name-short"]; ?>s Unique Members');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><?= $_USER->formatNumberForDisplay($user_member_total); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color"><?= $_COMPANY->getAppCustomization()['group']["name-short"]; ?> Total Members</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="user_member_total" width="260px" height="164"></canvas>
                                <script>
                                    createChart('user_member_total','<?= json_encode($companyTimeLabel)?>','<?= json_encode($c_user_member_total)?>','Company <?= $_COMPANY->getAppCustomization()["group"]["name-short"]; ?> Members');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <?php } ?>

    <div class="row">
        <div class="col-md-12">
            <h2 class="impact"><span><strong><?=$_ZONE->val('zonename')?> Zone Statistics</strong></span></h2>
            <div class="clearfix"></div>
            <h6 class="reference-text"> <?= sprintf(gettext("Please note that, other than membership statistics, all other statistics on this website are updated once a day and they were last updated on %s. Only the most current data point is updated, meaning that if a member leaves, the member count for previous months will not change, only the current month. These numbers are also for the entire zone, and not individual ERGs. To see those statistics, please view the statistics page on the dashboard of each ERG."),  "<strong>$zoneStatsAsOf</strong>"); ?> </h6>
            <div class="row">
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= sprintf(gettext('Back side Zone %s graph data image'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                    <span></span>
                                     
                                    <?= $_USER->formatNumberForDisplay($number_of_groups); ?> </h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total <?= $_COMPANY->getAppCustomization()['group']["name-short-plural"]; ?> &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total number of separate %s in this organization'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the total number of separate %s in this organization'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="number_of_groups" width="260px" height="164"></canvas>
                                <script>
                                    createChart('number_of_groups','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_number_of_groups)?>','Zone <?= $_COMPANY->getAppCustomization()["group"]["name-short-plural"]; ?>');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <?php if (0) { // Hiding this to get two complete rows ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= gettext('Back side Zone Regions graph data image');?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                            <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                        </span>
                                        <?= $_USER->formatNumberForDisplay($zone_regions); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Regions</h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="zone_regions" width="260px" height="164"></canvas>
                                <script>
                                    createChart('zone_regions','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_zone_regions)?>','Zone Regions');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <?php } ?>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= gettext('Back side Zone Office Locations graph data image');?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                            <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                        </span>                                        
                                        <?= $_USER->formatNumberForDisplay($zone_branches); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Office Locations &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total number of office locations in all of the %s in this organization.' ), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the total number of office locations in all of the %s in this organization.' ), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="zone_branches" width="260px" height="164"></canvas>
                                <script>
                                    createChart('zone_branches','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_zone_branches)?>','Zone Office Locations');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= gettext('Back side Total Zone Admins graph data image');?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                            <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                        </span>                                        
                                        <?= $_USER->formatNumberForDisplay($zone_admins); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Total Zone Admins &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total number of zone admin within all of the %s' ), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the total number of zone admin within all of the %s' ), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="zone_admins" width="260px" height="164"></canvas>
                                <script>
                                    createChart('zone_admins','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_zone_admins)?>','Total Zone Admins');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= sprintf(gettext('Back side %s Total Members graph data image'), $_COMPANY->getAppCustomization()['group']['name-short']); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                            <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                        </span>
                                        <?= $_USER->formatNumberForDisplay($user_members_total); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color"><?= $_COMPANY->getAppCustomization()['group']["name-short"]; ?> Total Members &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total number of members in %1$s . It is important to note that if a member is in multiple %1$s , they will be counted in each %1$s separately.' ), $_COMPANY->getAppCustomization()['group']['name-short']); ?>" title="<?= sprintf(gettext('This is the total number of members in %1$s . It is important to note that if a member is in multiple %1$s , they will be counted in each %1$s separately.' ), $_COMPANY->getAppCustomization()['group']['name-short']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="user_members_total" width="260px" height="164"></canvas>
                                <script>
                                    createChart('user_members_total','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_user_members_total)?>','<?= $_COMPANY->getAppCustomization()["group"]["name-short"]; ?> Total Members');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= sprintf(gettext('Back side %s Unique Members graph data image'), $_COMPANY->getAppCustomization()['group']['name-short']); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                            <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                        </span>
                                        <?= $_USER->formatNumberForDisplay($user_members_unique); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color"><?= $_COMPANY->getAppCustomization()['group']["name-short"]; ?> Unique Members  &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total number of unique users in %1$s in the organization. It is important to note that this number means that if a member is enrolled in multiple %1$s, they will only be counted once.'), $_COMPANY->getAppCustomization()['group']['name-short']); ?>" title="<?= sprintf(gettext('This is the total number of unique users in %1$s in the organization. It is important to note that this number means that if a member is enrolled in multiple %1$s, they will only be counted once.'), $_COMPANY->getAppCustomization()['group']['name-short']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="user_members_unique" width="260px" height="164"></canvas>
                                <script>
                                    createChart('user_members_unique','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_user_members_unique)?>','<?= $_COMPANY->getAppCustomization()["group"]["name-short"]; ?> Unique Members');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

                <?php if ($_COMPANY->getAppCustomization()['stats']['member_1']) { ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= sprintf(gettext('Back side Member One %s graph data image'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                            <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                        </span><?= $_USER->formatNumberForDisplay($user_members_1group); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Member One <?= $_COMPANY->getAppCustomization()['group']["name-short"]; ?> &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the number of members in the organization that are only enrolled in one %s'), $_COMPANY->getAppCustomization()['group']['name-short']); ?>" title="<?= sprintf(gettext('This is the number of members in the organization that are only enrolled in one %s'), $_COMPANY->getAppCustomization()['group']['name-short']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="user_members_1group" width="260px" height="164"></canvas>
                                <script>
                                    createChart('user_members_1group','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_user_members_1group)?>','Member One <?= $_COMPANY->getAppCustomization()["group"]["name-short-plural"]; ?>');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <?php } ?>

                <?php if ($_COMPANY->getAppCustomization()['stats']['member_2']) { ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= sprintf(gettext('Back side Member Two %s graph data image'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><span>
                                        <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                    </span>
                                    <?= $_USER->formatNumberForDisplay($user_members_2group); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Member Two <?= $_COMPANY->getAppCustomization()['group']["name-short-plural"]; ?> &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the number of members in the organization that are enrolled in two %s'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the number of members in the organization that are enrolled in two %s'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="user_members_2group" width="260px" height="164"></canvas>
                                <script>
                                    createChart('user_members_2group','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_user_members_2group)?>','Member Two <?= $_COMPANY->getAppCustomization()["group"]["name-short-plural"]; ?>');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <?php } ?>

                <?php if ($_COMPANY->getAppCustomization()['stats']['member_3']) { ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= sprintf(gettext('Back side Member Two + %s graph data image'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><span>
                                        <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                    </span>
                                    <?= $_USER->formatNumberForDisplay($user_members_3group); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Member Two+ <?= $_COMPANY->getAppCustomization()['group']["name-short-plural"]; ?> &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the number of members in the organization that are enrolled in two or more %s'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the number of members in the organization that are enrolled in two or more %s'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="user_members_3group" width="260px" height="164"></canvas>
                                <script>
                                    createChart('user_members_3group','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_user_members_3group)?>','Member Two+ <?= $_COMPANY->getAppCustomization()["group"]["name-short-plural"]; ?>');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <?php } ?>
                <?php if ($_COMPANY->getAppCustomization()['event']['enabled']) { ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= gettext('Back side Published Events graph data image'); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter"><span>
                                        <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                    </span>
                                    <?= $_USER->formatNumberForDisplay($zone_no_of_events); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Published Events &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total amount of published events in all %s in this zone'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the total amount of published events in all %s in this zone'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="zone_no_of_events" width="260px" height="164"></canvas>
                                <script>
                                    createChart('zone_no_of_events','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_zone_no_of_events)?>','Published Events');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
               <?php } ?>

               <?php if ($_COMPANY->getAppCustomization()['post']['enabled']) { ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= sprintf(gettext('Back side Published %s graph data image'), Post::GetCustomName(true)); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                        <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                    </span><?= $_USER->formatNumberForDisplay($zone_no_of_posts); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Published <?=Post::GetCustomName(true)?> &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total number of published announcements in all %s in this zone'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the total number of published announcements in all %s in this zone'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="zone_no_of_posts" width="260px" height="164"></canvas>
                                <script>
                                    createChart('zone_no_of_posts','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_zone_no_of_posts)?>','Published <?=Post::GetCustomName(true)?>');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <?php } ?>

                <?php if ($_COMPANY->getAppCustomization()['newsletters']['enabled']) { ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= gettext('Back side Published Newsletters graph data image'); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                            <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                        </span>
                                        <?= $_USER->formatNumberForDisplay($zone_no_of_newsletters); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Published Newsletters &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total number of published newsletters in all %s in this zone'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the total number of published newsletters in all %s in this zone'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="zone_no_of_newsletters" width="260px" height="164"></canvas>
                                <script>
                                    createChart('zone_no_of_newsletters','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_zone_no_of_newsletters)?>','Published Newsletters');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                 <?php } ?>

                <?php if ($_COMPANY->getAppCustomization()['albums']['enabled']) { ?>
                <div class="col-sm-6 col-lg-3">
                    <div class="widget-simple-chart text-right card-box-one g-quotes">
                        <div class="info-card" tabindex="0" aria-label="Flip card" data-front="Front side" data-back="<?= gettext('Back side Published Album Media graph data image'); ?>">
                            <div class="front">
                                <div class="top-div">
                                    <h3 class="text-success counter">
                                        <span>
                                            <!-- no content shown, but is a heading for screen reader Jaws Tool -->
                                        </span>
                                        <?= $_USER->formatNumberForDisplay($zone_no_of_album_media); ?></h3>
                                </div>
                                <div class="col-md-12 text-name post">
                                    <h5 class="all-text-color">Published Album Media &nbsp; <i class="fa fa-info-circle info-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" tabindex="0" aria-label="<?= sprintf(gettext('This is the total number of published album media within all %s in this zone'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>" title="<?= sprintf(gettext('This is the total number of published album media within all %s in this zone'), $_COMPANY->getAppCustomization()['group']['name-short-plural']); ?>"></i></h5>
                                </div>
                            </div>
                            <div class="back">
                                <canvas id="zone_no_of_album_media" width="260px" height="164"></canvas>
                                <script>
                                    createChart('zone_no_of_album_media','<?= json_encode($zoneTimeLabel)?>','<?= json_encode($c_zone_no_of_album_media)?>','Published Album Media');
                                </script>
                            </div>
                        </div>
                    </div>
                </div>

               <?php } ?>
            </div>
        </div>
    </div>

    <?php if (0) { ?>
        <div class="row ">
            <div class="col-md-12">
                <div class="widget-simple-chart card-box-one fixhight">
                    <div class="col-md-12">
                        <button class="additional-button" onclick="window.open('membership_reporting','_self',false)" id="">
                            Additional Reporting
                        </button>
                        <h4 class="both-Group">Monthly Usage Graph</h4>

                    </div>
                    <div class="col-md-12">
                        <!--div id="chartContainer" style="height: 300px; width: 100%;"></div-->
                        <?php if (count($usage) > 0) { ?>
                            <!-- <div id="container" style="width:100%; height: 300px; margin: 0 auto"></div> -->
                            <canvas id="containerChartjs" style="width:100%; height: 300px; margin: 0 auto"></canvas>

                        <?php } else { ?>
                            <div class="col-md-2 col-md-offset-5" style="padding-top: 150px; height: 300px; ">No data</div>
                        <?php } ?>
                        <!-- <div id="containerChartjs" style="width:100%; height: 300px; margin: 0 auto"></div> -->

                    </div>
                </div>
            </div>
        </div>
    <?php } ?>

    <!-- Time Zone Setting -->
    <?php
    if (empty($_SESSION['timezone']) || !empty($_SESSION['timezone_ask_user'])) {
        if (empty($_USER->val('timezone'))) {
            ?>

            <div id="updateTZ" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Update Timezone</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <p>We could not detect your timezone. Please select a timezone that you would like
                                        to be used as your default timezone. If you need to change your default timezone
                                        in future you can update it from your profile settings.</p>
                                    <p>&nbsp;</p>
                                    <div class="form-group">
                                        <label class="control-lable col-sm-4">Timezone</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" name="timezone" id="selected_timezone">
                                                <?php echo getTimeZonesAsHtmlSelectOptions(''); ?>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="col-md-6 col-md-offset-2">
                                <button type="button" onclick="updateTimeZone();" class="btn btn-primary">Update
                                    Timezone
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <script>
                $(window).on('load', function () {
                    $('#updateTZ').modal({
                        backdrop: 'static',
                        keyboard: false
                    })
                });
            </script>
        <?php
        } else {
        ?>
            <div id="differentTZ" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">New timezone found</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <p>We have detected that you are in a new timezone <strong><?= $_SESSION['tz_b']; ?></strong>
                                        and your profile timezone is set to <strong><?= $_USER->val('timezone'); ?></strong>. Choose one
                                        of the following options to continue. </p>
                                </div>
                            </div>
                        </div>
                        <div class="hidden">
                            <select class="form-control" name="timezone" id="selected_timezone">
                                <option value="<?= $_SESSION['tz_b']; ?>" selected></option>
                            </select>
                        </div>
                        <div class="modal-footer">
                            <button type="button" onclick="useBrowserTimezone('<?= $_SESSION['tz_b']; ?>');"
                                    class="btn btn-primary">Use my browsers timezone for this session
                            </button>
                            </br></br>
                            <button type="button" onclick="updateTimeZone();" class="btn btn-primary">Update my profile
                                with the new timezone
                            </button>
                            </br></br>
                            <button type="button" class="btn btn-primary"
                                    onclick="useProfileTimezone('<?= $_USER->val('timezone') ?>');">Use the timezone set in
                                my profile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <script>
                $(window).on('load', function () {
                    $('#differentTZ').modal({
                        backdrop: 'static',
                        keyboard: false
                    })
                });
            </script>
            <?php
        }
    }
    ?>

    <div role="region" aria-live="polite" id="adminDashboradAnouncement" class="visually-hidden"></div>
    <!-- Monthly Visitors Graph -->
    <script>
        var data = {
            labels: [
                <?php    if (count($usage) > 0) {
                for ($m = 0; $m < count($usage); $m++) {
                    echo "'" . date("M-Y", strtotime($usage[$m]['date'])) . "',";
                }
            }
                ?>
            ],
            datasets: [
                {
                    label: "Monthly Interactions (Web & Email)",
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "rgba(75,192,192,0.4)",
                    borderColor: "#317eac",
                    borderCapStyle: 'butt',
                    borderDash: [],
                    borderDashOffset: 0.0,
                    borderJoinStyle: 'miter',
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointBackgroundColor: "#fff",
                    pointBorderWidth: 1,
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 4,
                    data: [

                        <?php    if (count($usage) > 0) {
                        for ($d = 0; $d < count($usage); $d++) {
                            echo (int)$usage[$d]['total'] . ",";
                        }
                    } else {
                        echo "";
                    } ?>


                    ],
                    spanGaps: false,
                }
            ]
        };

        new Chart("containerChartjs", {
            type: 'line',
            data: data,
            options: {}
        });
    </script>

    <?php if (0) { /* Commented out on 11/01/2020 */ ?>

        <script>
            var data = {
                labels: [
                    <?php    for($gc = 0;$gc < count($groups);$gc++){ ?>
                    "<?= htmlspecialchars_decode($groups[$gc]['groupname']); ?>",
                    <?php    } ?>
                ],
                datasets: [
                    {
                        backgroundColor: [
                            <?php    for($gc = 0;$gc < count($groups);$gc++){ ?>
                            '<?= $groups[$gc]['overlaycolor'];?>',
                            <?php    } ?>
                        ],
                        data: [
                            <?php    for($a = 0;$a < count($groups);$a++){ ?>
                            <?= $groups[$a]['members']; ?>,
                            <?php    }    ?>

                        ],
                        spanGaps: false,
                    }
                ]
            };

            var options = {
                tooltips: {
                    enabled: true
                },
                plugins: {
                    datalabels: {
                        formatter: (value, ctx) => {
                            let datasets = ctx.chart.data.datasets;

                            if (datasets.indexOf(ctx.dataset) === datasets.length - 1) {
                                let sum = datasets[0].data.reduce((a, b) => a + b, 0);
                                let percentage = Math.round((value / sum) * 100) + '%';
                                return percentage;
                            } else {
                                return percentage;
                            }
                        },
                        color: '#fff',
                    }
                },

            };

            var ctx = document.getElementById("piechartJs").getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: data,
                options: options
            });
        </script>

        <script>
            $(document).ready(function () {
                $("#togg").click(function () {
                    $("#slt").toggle();
                });
            });
            $(document).ready(function () {
                $("#togg-1").click(function () {
                    $("#slt-1").toggle();
                });
            });
            $(document).ready(function () {
                $("#togg-2").click(function () {
                    $("#slt-2").toggle();
                });
            });
            $(document).ready(function () {
                $("#togg-3").click(function () {
                    $("#slt-3").toggle();
                });
            });
        </script>
        <script type="text/javascript"
                src="<?= TELESKOPE_CDN_STATIC ?>/vendor/js/bxslider-4-4.2.12/jquery.bxslider.min.js"></script>
        <script>
            $('.bxslider').bxSlider({
                pause: 10000,
                auto: true,
            });
        </script>
    <?php } ?>

    <script>
    $('.info-card').on('click', function (event) {
        if ($(event.target).closest('.dropdown').length > 0) {
            return; // Stop the event if the clicked element or its ancestor has the class "dropdown"
        }
        $(this).toggleClass('toggleFlip');
    });
    </script>

<script>
    $(function(){
        $(".info-card").keypress(function (e) {
            if (e.keyCode == 13) {        
                $(this).toggleClass("toggleFlip");
            }
        });
    });

    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    });


    const flipCards = document.querySelectorAll('.info-card');
    const announcement = document.getElementById('adminDashboradAnouncement');

  flipCards.forEach(flipCard => {
    flipCard.addEventListener('click', () => {
      flipCard.classList.toggle('flipped');
      const frontContent = flipCard.getAttribute('data-front');
      const backContent = flipCard.getAttribute('data-back');
      const isFlipped = flipCard.classList.contains('flipped');
      
      if (isFlipped) {
        announcement.textContent = `${backContent} is now visible.`;
      } else {
        announcement.textContent = `${frontContent} is now visible.`;
      }
    });

    flipCard.addEventListener('keydown', event => {
      if (event.key === 'Enter' || event.key === ' ') {
        flipCard.classList.toggle('flipped');
        const frontContent = flipCard.getAttribute('data-front');
        const backContent = flipCard.getAttribute('data-back');
        const isFlipped = flipCard.classList.contains('flipped');
        
        if (isFlipped) {
          announcement.textContent = `${backContent} is now visible.`;
        } else {
          announcement.textContent = `${frontContent} is now visible.`;
        }
      }
    });

    flipCard.addEventListener('focus', () => {
      const frontContent = flipCard.getAttribute('data-front');
      announcement.textContent = `Card: ${frontContent}  Press Space or Enter to flip`;
    });

    flipCard.addEventListener('blur', () => {
      announcement.textContent = '';
    });
  });
</script>
</div>

</div>
</body>
</html>
