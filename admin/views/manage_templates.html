<div class="container col-md-offset-3 col-lg-offset-2 margin-top">
    <div class="row"> 
        <div class="col-md-12">
            <div class="widget-simple-chart card-box">
                
                <div class="col-xs-12 col-sm-8 col-md-9"><h6>Manage Templates</h6></div>
                <div class="col-xs-12 col-sm-4 col-md-3 text-right"><a  class="btn btn-info" href="createtemplate">+ Create Template</a></div>
                <div class="clearfix"></div>            
                <div class="table-responsive ">
                    <table class="table table-bordered table-hover display compact" id="template_list">
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>Template Name</th>
                                <th>Template Type</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                    <?php $i =1;
                        foreach($templates as $template){
                            $status = 1; 
                            $_status = "ACTIVATE";
                            if ( $template['isactive'] == 2){
                                $status = 1; 
                                $_status = "PUBLISH";
                            } else if( $template['isactive'] == 1) {
                                $status = 0; 
                                $_status = "DEACTIVATE";
                            }
                        ?>
                            <tr>
                                <td><?= $i; ?></td>
                                <td><?= htmlspecialchars($template['templatename']); ?></td>
                                <td><?= $type[ $template['templatetype']]; ?></td>
                                <td>
                                <?php if( $template['isactive'] != 1){ ?>
                                    <a class="btn btn-info btn-sm" href="editTemplate?id=<?= $_COMPANY->encodeId($template['templateid']); ?>">EDIT</a>
                                    &nbsp;
                                <?php } ?>
                                    <a class="btn btn-info btn-sm deluser" title="<b>Are you sure to update status?</b>" href='ajax?updateTemplateStatus=<?= $_COMPANY->encodeId($template['templateid']); ?>&status=<?= $_COMPANY->encodeId($status); ?>'><?= $_status; ?></a></td>
                            </tr>	
                    <?php $i++;
                	    } ?>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>	

<div id="templatePreview" class="modal fade" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Template Preview</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <div id="templateContent"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal"><?= gettext("Close")?></button>
        </div>
      </div>
  
    </div>
  </div>

  <script src="<?=TELESKOPE_CDN_STATIC?>/vendor/js/datatables-2.1.8/datatables.min.js"></script>
<script>

    $('#template_list').DataTable( {
		"order": [],
		"bPaginate": false,
		"bInfo" : false,
        "columnDefs": [
            { targets: [-1], orderable: false }
        ],
    } );
    
</script>
</body>
</html>